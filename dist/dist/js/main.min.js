function showImage(e){const t=e.parentElement,n=t.querySelector("i");let o=t.querySelector("img");if(o&&o.remove(),e.files&&e.files[0]){o=document.createElement("img");const a=new FileReader;a.onload=function(e){o.src=e.target.result,o.style.display="block",o.style.maxWidth="100%",o.style.height="auto",n.style.display="none",t.appendChild(o)},a.readAsDataURL(e.files[0])}else n.style.display="block"}function generarCodigo(){var e=document.getElementById("nombre").value,t=document.getElementById("ubicacion").value,n=(document.getElementById("id_categoria").value,""),o=e.trim().split(" "),a=t.trim().split(" ");o.length>=2?n+=o[0].substring(0,2).toUpperCase()+o[1].substring(0,2).toUpperCase():1===o.length&&o[0].length>=4?n+=o[0].substring(0,4).toUpperCase():n+=o[0].substring(0,2).toUpperCase();a.length>=2?n+=a[0].substring(0,2).toUpperCase()+a[1].substring(0,2).toUpperCase():1===a.length&&a[0].length>=4?n+=a[0].substring(0,4).toUpperCase():n+=a[0].substring(0,2).toUpperCase();n+=Math.floor(100*Math.random()).toString().padStart(2,"0"),document.getElementById("codigo").value=n}function generarCodigoCategoria(){var e=document.getElementById("nombre_categoria").value.trim(),t="CA";if(e){var n=e.split(" ");if(n.length>1)t+=n[0].substring(0,2).toUpperCase()+n[1].substring(0,2).toUpperCase();else t+=e.substring(0,4).toUpperCase()}t.length>6&&(t=t.substring(0,6)),document.getElementById("cod_categoria").value=t}function mostrarFormularioActualizar(e,t,n,o){document.getElementById("id_categoria_act").value=e,document.getElementById("cod_categoria_act").value=t,document.getElementById("nombre_categoria_act").value=n,document.getElementById("descripcion_categoria_act").value=o,document.getElementById("form_registrar").style.display="none",document.getElementById("form_actualizar").style.display="block",document.getElementById("form_actualizar").scrollIntoView({behavior:"smooth"})}function cancelarActualizacion(){Swal.fire({title:"Cancelado",text:"Categoría no actualizada.",icon:"info",confirmButtonText:"Aceptar",customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1}).then((()=>{document.getElementById("form_actualizar").style.display="none",document.getElementById("form_registrar").style.display="block",document.getElementById("form_registrar").scrollIntoView({behavior:"smooth"})}))}document.querySelectorAll(".dropzone").forEach((e=>{const t=e.querySelector(".custom-file-input"),n=e.querySelector(".custom-file-label");e.addEventListener("dragover",(t=>{t.preventDefault(),e.classList.add("dragover")})),e.addEventListener("dragleave",(()=>{e.classList.remove("dragover")})),e.addEventListener("drop",(o=>{o.preventDefault(),e.classList.remove("dragover");const a=o.dataTransfer.files;a.length&&(t.files=a,n.textContent=a[0].name,showImage(t))})),t.addEventListener("change",(()=>{t.files.length&&(n.textContent=t.files[0].name,showImage(t))}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('.image-upload input[type="file"]').forEach((e=>{e.addEventListener("change",(function(){showImage(e)}))}))})),console.log("Hola amigutos "),$(document).on("click",".btn_eliminar",(function(e){e.preventDefault();const t=$(this).attr("href"),n=$(this).data("entity");Swal.fire({title:`¿Estás seguro de eliminar esta ${n}?`,text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"No, cancelar",customClass:{confirmButton:"btn btn-success g-2",cancelButton:"btn btn-danger g-2"},buttonsStyling:"btn btn-success"}).then((e=>{e.isConfirmed?Swal.fire({title:"¡Eliminado!",text:`${n} ha sido eliminado.`,icon:"success",confirmButtonClass:"btn btn-success",buttonsStyling:"btn btn-success"}).then((()=>{window.location.href=t})):Swal.fire({title:"Cancelado",text:`Tu ${n} está a salvo.`,icon:"error",confirmButtonClass:"btn btn-success",buttonsStyling:"btn btn-success"})}))}));